<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Criando Aplicações de Busca - genaibeginner</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Criando Aplica\u00e7\u00f5es de Busca";
        var mkdocs_page_input_path = "08-building-search-applications\\translations\\pt-br\\README.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> genaibeginner
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../00-course-setup/translations/cn/">课程介绍和学习环境设置</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../01-introduction-to-genai/translations/cn/">第一章：生成式人工智能和 LLMs 介绍</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../02-exploring-and-comparing-different-llms/translations/cn/">第二章：探索和比较不同的 LLMs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../03-using-generative-ai-responsibly/translations/cn/">第三章：负责任地使用生成式人工智能</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../04-prompt-engineering-fundamentals/translations/cn/">第四章：提示工程基础</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../05-advanced-prompts/translations/cn/">第五章：创建高级的提示工程技巧</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../06-text-generation-apps/translations/cn/">第六章：创建文本生成应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../07-building-chat-applications/translations/cn/">第七章：创建聊天应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cn/">第八章：创建搜索应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../09-building-image-applications/translations/cn/">第九章：创建图像应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../10-building-low-code-ai-applications/translations/cn/">第十章：创建低代码AI应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../11-integrating-with-function-calling/translations/cn/">第十一章：集成函数调用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../12-designing-ux-for-ai-applications/translations/cn/">第十二章：为人工智能应用程序设计用户体验</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../13-securing-ai-applications/translations/cn/">第十三章：保护AI应用程序</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../14-the-generative-ai-application-lifecycle/translations/cn/">第十四章：生成式AI应用生命周期</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../15-rag-and-vector-databases/translations/cn/">第十五章：检索增强生成和向量数据库</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../16-open-source-models/translations/tw/">第十六章：开源模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../17-ai-agents/translations/tw/">第十七章：AI Agent</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../18-fine-tuning/translations/tw/">第十八章：微调</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../19-slm/">第十九章：SLM模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../20-mistral/">第二十章：Mistral的模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../21-meta/">第二十一章：Meta的模型</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">genaibeginner</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Criando Aplicações de Busca</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="criando-aplicacoes-de-busca">Criando Aplicações de Busca</h1>
<p><a href="https://aka.ms/gen-ai-lesson8-gh?WT.mc_id=academic-105485-koreyst"><img alt="Introduction to Generative AI and Large Language Models" src="../../images/08-lesson-banner.png?WT.mc_id=academic-105485-koreyst" /></a></p>
<p>Há muito mais nas LLMs do que chatbots e geração de texto. Também é possível criar aplicações de busca usando <code>Embeddings</code>. <code>Embeddings</code> são representações numéricas de dados, também conhecidas como vetores, e podem ser usados para busca semântica de dados.</p>
<p>Nesta lição, você vai criar uma aplicação de busca para a nossa startup de educação. Nossa startup é uma organização sem fins lucrativos que fornece educação gratuita para estudantes em países em desenvolvimento. Nossa startup possui uma grande quantidade de vídeos no YouTube que os estudantes podem usar para aprender sobre IA. Nossa startup deseja criar uma aplicação de busca que permita aos estudantes procurar por um vídeo no YouTube digitando uma pergunta.</p>
<p>Por exemplo, um estudante pode digitar: 'O que é Jupyter Notebooks?' ou 'O que é Azure ML' e a aplicação de busca retornará uma lista de vídeos do YouTube relevantes para a pergunta. E melhor ainda, a aplicação de busca retornará um link para o local no vídeo onde está localizada a resposta para a pergunta.</p>
<h2 id="introducao">Introdução</h2>
<p>Nesta lição, vamos cobrir:</p>
<ul>
<li>Busca semântica vs busca por palavras-chave.</li>
<li>O que são Embeddings de Texto.</li>
<li>Criando um Índice de Embeddings de Texto.</li>
<li>Buscando em um Índice de Embeddings de Texto.</li>
</ul>
<h2 id="metas-de-aprendizado">Metas de Aprendizado</h2>
<p>Após completar esta lição, você será capaz de:</p>
<ul>
<li>Diferenciar entre busca semântica e busca por palavras-chave.</li>
<li>Explicar o que são Embeddings de Texto.</li>
<li>Criar uma aplicação usando Embeddings para buscar dados.</li>
</ul>
<h2 id="por-que-criar-uma-aplicacao-de-busca">Por que criar uma aplicação de busca?</h2>
<p>Criar uma aplicação de busca ajudará você a entender como usar Embeddings para buscar dados. Você também aprenderá como construir uma aplicação de busca que pode ser usada por estudantes para encontrar informações rapidamente.</p>
<p>A lição inclui um Índice de Embeddings dos transcritos do YouTube para o canal <a href="https://www.youtube.com/playlist?list=PLlrxD0HtieHi0mwteKBOfEeOYf0LJU4O1">AI Show</a> da Microsoft no YouTube. O AI Show é um canal do YouTube que ensina sobre IA e aprendizado de máquina. O Índice de Embeddings contém os Embeddings para cada um dos transcritos do YouTube até outubro de 2023. Você usará o Índice de Embeddings para construir uma aplicação de busca para nossa startup. A aplicação de busca retorna um link para o local no vídeo onde está localizada a resposta para a pergunta. Esta é uma ótima maneira para os estudantes encontrarem rapidamente as informações de que precisam.</p>
<p>Abaixo nós temos um exemplo de uma consulta semântica para a pergunta: 'É possível usar o RStudio com o Azure ML?'. Confira a URL do YouTube, você verá que a URL contém um carimbo de data/hora que o leva para o local no vídeo onde está localizada</p>
<p><img alt="Semantic query for the question &quot;can you use rstudio with Azure ML&quot;" src="../../images/query-results.png?WT.mc_id=academic-105485-koreyst" /></p>
<h2 id="o-que-e-busca-semantica">O que é busca semântica?</h2>
<p>Agora você pode estar se perguntando, o que é busca semântica? A busca semântica é uma técnica de busca que utiliza a semântica, ou significado, das palavras em uma consulta para retornar resultados relevantes.</p>
<p>Aqui está um exemplo de busca semântica. Digamos que você esteja procurando comprar um carro, você pode buscar por 'meu carro dos sonhos', a busca semântica entende que você não está <code>sonhando</code> com um carro, mas sim procurando comprar o seu carro <code>ideal</code>. A busca semântica compreende sua intenção e retorna resultados relevantes. A alternativa é a <code>busca por palavras-chave</code>, que literalmente procuraria sonhos sobre carros e frequentemente retornaria resultados irrelevantes.</p>
<h2 id="o-que-sao-embeddings-de-texto">O que são Embeddings de Texto?</h2>
<p><a href="https://en.wikipedia.org/wiki/Word_embedding?WT.mc_id=academic-105485-koreyst">Embeddings de texto</a> são uma técnica de representação de texto usada em <a href="https://en.wikipedia.org/wiki/Natural_language_processing?WT.mc_id=academic-105485-koreyst">processamento de linguagem natural</a>. Embeddings de texto são representações numéricas semânticas de texto. Embeddings são usados para representar dados de uma maneira fácil para uma máquina entender. Existem muitos modelos para construir embeddings de texto, nesta lição, vamos nos concentrar em gerar embeddings usando o Modelo de Embedding da OpenAI.</p>
<p>Aqui está um exemplo, imagine que o seguinte texto está em um transcrição de um dos episódios no canal do YouTube AI Show:</p>
<pre><code class="language-text">Today we are going to learn about Azure Machine Learning.
</code></pre>
<p>Nós passaríamos o texto para a API de Embedding da OpenAI e ela retornaria o seguinte embedding consistindo de 1536 números, também conhecido como um vetor. Cada número no vetor representa um aspecto diferente do texto. Para brevidade, aqui estão os primeiros 10 números do vetor.</p>
<pre><code class="language-python">[-0.006655829958617687, 0.0026128944009542465, 0.008792596869170666, -0.02446001023054123, -0.008540431968867779, 0.022071078419685364, -0.010703742504119873, 0.003311325330287218, -0.011632772162556648, -0.02187200076878071, ...]
</code></pre>
<h2 id="como-o-indice-de-embeddings-e-criado">Como o Índice de Embeddings é criado?</h2>
<p>O Índice de Embeddings para esta lição foi criado com uma série de scripts Python. Você encontrará os scripts juntamente com as instruções no <a href="../../scripts/?WT.mc_id=academic-105485-koreyst">README</a> na pasta 'scripts' para esta lição. Você não precisa executar esses scripts para completar esta lição, pois o Índice de Embeddings é fornecido para você.</p>
<p>Os scripts executam as seguintes operações:</p>
<ol>
<li>
<p>A transcrição de cada vídeo do YouTube na lista de reprodução <a href="https://www.youtube.com/playlist?list=PLlrxD0HtieHi0mwteKBOfEeOYf0LJU4O1">AI Show</a> é baixada.</p>
</li>
<li>
<p>Usando <a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/function-calling?WT.mc_id=academic-105485-koreyst">OpenAI Functions</a>, uma tentativa é feita para extrair o nome do orador dos primeiros 3 minutos do transcrição do YouTube. O nome do orador para cada vídeo é armazenado no Índice de Embeddings chamado <code>embedding_index_3m.json</code>.</p>
</li>
<li>
<p>O texto da transcrição é então dividido em <strong>segmentos de texto de 3 minutos</strong>. O segmento inclui cerca de 20 palavras sobrepostas do próximo segmento para garantir que o Embedding para o segmento não seja cortado e para fornecer um melhor contexto de busca.</p>
</li>
<li>
<p>Cada segmento de texto é então passado para a API de Chat da OpenAI para resumir o texto em 60 palavras. O resumo também é armazenado no Índice de Embeddings <code>embedding_index_3m.json</code>.</p>
</li>
<li>
<p>Finalmente, o texto do segmento é passado para a API de Embedding da OpenAI. A API de Embedding retorna um vetor de 1536 números que representam o significado semântico do segmento. O segmento juntamente com o vetor de Embedding da OpenAI é armazenado em um Índice de Embeddings <code>embedding_index_3m.json</code>.</p>
</li>
</ol>
<h3 id="banco-de-dados-vetorial">Banco de Dados Vetorial</h3>
<p>Para simplificar a lição, o Índice de Embeddings é armazenado em um arquivo JSON chamado <code>embedding_index_3m.json</code> e carregado em um DataFrame Pandas. No entanto, em produção, o Índice de Embeddings seria armazenado em um banco de dados vetorial como <a href="https://learn.microsoft.com/training/modules/improve-search-results-vector-search?WT.mc_id=academic-105485-koreyst">Azure Cognitive Search</a>, <a href="https://cookbook.openai.com/examples/vector_databases/redis/readme?WT.mc_id=academic-105485-koreyst">Redis</a>, <a href="https://cookbook.openai.com/examples/vector_databases/pinecone/readme?WT.mc_id=academic-105485-koreyst">Pinecone</a>, <a href="https://cookbook.openai.com/examples/vector_databases/weaviate/readme?WT.mc_id=academic-105485-koreyst">Weaviate</a>, para citar apenas alguns.</p>
<h2 id="compreendendo-a-similaridade-de-cosseno">Compreendendo a similaridade de cosseno</h2>
<p>Aprendemos sobre embeddings de texto, o próximo passo é aprender como usar embeddings de texto para buscar dados e, em particular, encontrar os embeddings mais semelhantes a uma consulta dada usando a similaridade de cosseno.</p>
<h3 id="o-que-e-similaridade-de-cosseno">O que é similaridade de cosseno?</h3>
<p>A similaridade de cosseno é uma medida de similaridade entre dois vetores, você também ouvirá isso referido como <code>busca por vizinho mais próximo</code>. Para realizar uma busca por similaridade de cosseno, é necessário <em>vetorizar</em> o texto da <em>consulta</em> usando a API de Embedding da OpenAI. Em seguida, calcular a <em>similaridade de cosseno</em> entre o vetor de consulta e cada vetor no Índice de Embeddings. Lembre-se, o Índice de Embeddings tem um vetor para cada segmento de texto do transcrição do YouTube. Finalmente, ordene os resultados por similaridade de cosseno, e os segmentos de texto com a maior similaridade de cosseno são os mais semelhantes à consulta.</p>
<p>De uma perspectiva matemática, a similaridade de cosseno mede o cosseno do ângulo entre dois vetores projetados em um espaço multidimensional. Essa medida é benéfica, porque se dois documentos estão distantes pela distância euclidiana devido ao tamanho, eles ainda podem ter um ângulo menor entre eles e, portanto, uma maior similaridade de cosseno. Para mais informações sobre as equações de similaridade de cosseno, consulte <a href="https://en.wikipedia.org/wiki/Cosine_similarity?WT.mc_id=academic-105485-koreyst">Similaridade de cosseno</a>.</p>
<h2 id="criando-sua-primeira-aplicacao-de-busca">Criando sua primeira aplicação de busca</h2>
<p>A seguir, vamos aprender como construir uma aplicação de busca usando Embeddings. A aplicação de busca permitirá que os estudantes procurem por um vídeo digitando uma pergunta. A aplicação de busca retornará uma lista de vídeos relevantes para a pergunta. A aplicação de busca também retornará um link para o local no vídeo onde está localizada a resposta para a pergunta.</p>
<p>Esta solução foi construída e testada no Windows 11, macOS e Ubuntu 22.04 usando Python 3.10 ou posterior. Você pode baixar o Python em <a href="https://www.python.org/downloads/?WT.mc_id=academic-105485-koreyst">python.org</a>.</p>
<h2 id="assignment-building-a-search-application-to-enable-students">Assignment - building a search application, to enable students</h2>
<h2 id="tarefa-criando-uma-aplicacao-de-busca-para-habilitar-os-estudantes">Tarefa - criando uma aplicação de busca para habilitar os estudantes</h2>
<p>Nós introduzimos nossa startup no início desta lição. Agora é hora de habilitar os estudantes para criar uma aplicação de busca para suas avaliações.</p>
<p>Nessa tarefa, você criará os Serviços Azure OpenAI que serão usados para construir a aplicação de busca. Você criará os seguintes Serviços Azure OpenAI. Você precisará de uma assinatura Azure para completar esta tarefa.</p>
<h3 id="inicie-o-azure-cloud-shell">Inicie o Azure Cloud Shell</h3>
<ol>
<li>Entre no <a href="https://portal.azure.com/?WT.mc_id=academic-105485-koreyst">portal Azure</a>.</li>
<li>Selecione o ícone do Cloud Shell no canto superior direito do portal Azure.</li>
<li>Selecione <strong>Bash</strong> para o tipo de ambiente.</li>
</ol>
<h4 id="crie-um-grupo-de-recursos">Crie um grupo de recursos</h4>
<blockquote>
<p>Para estas instruções, estamos usando o grupo de recursos chamado "semantic-video-search" no East US.
Você pode alterar o nome do grupo de recursos, mas ao alterar o local dos recursos,
verifique a <a href="https://aka.ms/oai/models?WT.mc_id=academic-105485-koreyst">tabela de disponibilidade do modelo</a>.</p>
</blockquote>
<pre><code class="language-shell">az group create --name semantic-video-search --location eastus
</code></pre>
<h4 id="crie-um-recurso-do-servico-do-azure-openai">Crie um recurso do Serviço do Azure OpenAI</h4>
<p>No Azure Cloud Shell, execute o seguinte comando para criar um recurso do Serviço Azure OpenAI.</p>
<pre><code class="language-shell">az cognitiveservices account create --name semantic-video-openai --resource-group semantic-video-search \
    --location eastus --kind OpenAI --sku s0
</code></pre>
<h4 id="obtenha-o-endpoint-e-as-chaves-para-uso-nesta-aplicacao">Obtenha o endpoint e as chaves para uso nesta aplicação</h4>
<p>No Azure Cloud Shell, execute os seguintes comandos para obter o endpoint e as chaves para o recurso do Serviço Azure OpenAI.</p>
<pre><code class="language-shell">az cognitiveservices account show --name semantic-video-openai \
   --resource-group  semantic-video-search | jq -r .properties.endpoint
az cognitiveservices account keys list --name semantic-video-openai \
   --resource-group semantic-video-search | jq -r .key1
</code></pre>
<h4 id="implemente-o-modelo-de-embedding-da-openai">Implemente o modelo de Embedding da OpenAI</h4>
<p>No Azure Cloud Shell, execute o seguinte comando para implantar o modelo de Embedding da OpenAI.</p>
<pre><code class="language-shell">az cognitiveservices account deployment create \
    --name semantic-video-openai \
    --resource-group  semantic-video-search \
    --deployment-name text-embedding-ada-002 \
    --model-name text-embedding-ada-002 \
    --model-version &quot;2&quot;  \
    --model-format OpenAI \
    --sku-capacity 100 --sku-name &quot;Standard&quot;
</code></pre>
<h2 id="solucao">Solução</h2>
<p>Abre a <a href="../../python/aoai-solution.ipynb?WT.mc_id=academic-105485-koreyst">notebook de solução</a> no GitHub Codespaces e siga as instruções no Jupyter Notebook.</p>
<p>Quando você executar o notebook, será solicitado a inserir uma consulta. A caixa de entrada será assim:</p>
<p><img alt="Input box for the user to input a query" src="../../images/notebook-search.png?WT.mc_id=academic-105485-koreyst" /></p>
<h2 id="excelente-trabalho-continue-aprendendo">Excelente trabalho! Continue aprendendo!</h2>
<p>Após completar esta lição, confira nossa <a href="https://aka.ms/genai-collection?WT.mc_id=academic-105485-koreyst">coleção de aprendizado de IA generativa</a> para continuar a aprimorar seu conhecimento em IA generativa!</p>
<p>Aqui vamos, para a Lição 9, onde veremos como <a href="../../../09-building-image-applications/translations/pt-br/?WT.mc_id=academic-105485-koreyst">criar aplicações de geração de imagens</a>!</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
