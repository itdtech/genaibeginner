<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Desenvolvendo Aplicativos de Geração de Texto - genaibeginner</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Desenvolvendo Aplicativos de Gera\u00e7\u00e3o de Texto";
        var mkdocs_page_input_path = "06-text-generation-apps\\translations\\pt-br\\README.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> genaibeginner
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../../00-course-setup/translations/cn/README.md">课程介绍和学习环境设置</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../01-introduction-to-genai/translations/cn/">第一章：生成式人工智能和 LLMs 介绍</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../02-exploring-and-comparing-different-llms/translations/cn/">第二章：探索和比较不同的 LLMs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../03-using-generative-ai-responsibly/translations/cn/">第三章：负责任地使用生成式人工智能</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../04-prompt-engineering-fundamentals/translations/cn/">第四章：提示工程基础</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../05-advanced-prompts/translations/cn/">第五章：创建高级的提示工程技巧</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cn/">第六章：创建文本生成应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../07-building-chat-applications/translations/cn/">第七章：创建聊天应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../08-building-search-applications/translations/cn/">第八章：创建搜索应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../09-building-image-applications/translations/cn/">第九章：创建图像应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../10-building-low-code-ai-applications/translations/cn/">第十章：创建低代码AI应用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../11-integrating-with-function-calling/translations/cn/">第十一章：集成函数调用</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../12-designing-ux-for-ai-applications/translations/cn/">第十二章：为人工智能应用程序设计用户体验</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../13-securing-ai-applications/translations/cn/">第十三章：保护AI应用程序</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../14-the-generative-ai-application-lifecycle/translations/cn/">第十四章：生成式AI应用生命周期</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../15-rag-and-vector-databases/translations/cn/">第十五章：检索增强生成和向量数据库</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../16-open-source-models/translations/tw/">第十六章：开源模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../17-ai-agents/translations/tw/">第十七章：AI Agent</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../18-fine-tuning/translations/tw/">第十八章：微调</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../19-slm/">第十九章：SLM模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../20-mistral/">第二十章：Mistral的模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../21-meta/">第二十一章：Meta的模型</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">genaibeginner</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Desenvolvendo Aplicativos de Geração de Texto</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="desenvolvendo-aplicativos-de-geracao-de-texto">Desenvolvendo Aplicativos de Geração de Texto</h1>
<p><a href="https://aka.ms/gen-ai-lesson6-gh?WT.mc_id=academic-105485-koreyst"><img alt="Building Text Generation Applications" src="../../images/06-lesson-banner.png?WT.mc_id=academic-105485-koreyst" /></a></p>
<blockquote>
<p><em>(Clique na imagem acima para assistir ao vídeo desta lição)</em></p>
</blockquote>
<p>Você viu até agora neste currículo que existem conceitos básicos como prompts e até mesmo uma disciplina inteira chamada "engenharia de prompts". Muitas ferramentas com as quais você pode interagir, como ChatGPT, Office 365, Microsoft Power Platform e muito mais, suportam o uso de prompts para realizar algo.</p>
<p>Para que você adicione tal experiência a um aplicação, você precisa entender conceitos como prompts, conclusões e escolher uma biblioteca para trabalhar. É exatamente isso que você aprenderá neste capítulo.</p>
<h2 id="introducao">Introdução</h2>
<p>Nesse capítulo, você aprenderá:</p>
<ul>
<li>Aprender sobre a biblioteca openai e seus conceitos básicos.</li>
<li>Criar uma aplicação de geração de texto usando openai.</li>
<li>Entender como usar conceitos como prompt, temperatura e tokens para construir um aplicativo de geração de texto.</li>
</ul>
<h2 id="objetivos-de-aprendizagem">Objetivos de aprendizagem</h2>
<p>No final desta lição, você será capaz de:</p>
<ul>
<li>Explicar o que é uma aplicação de geração de texto.</li>
<li>Criar uma aplicação de geração de texto usando openai.</li>
<li>Configurar sua aplicação para usar mais ou menos tokens e também alterar a temperatura, para uma saída variada.</li>
</ul>
<h2 id="o-que-e-uma-aplicacao-de-geracao-de-texto">O que é uma aplicação de geração de texto?</h2>
<p>Normalmente quando você desenvolve uma aplicaçaõ, ele tem algum tipo de interface como a seguinte:</p>
<ul>
<li>Baseado em comando. Aplicações de console são aplicativos típicos onde você digita um comando e ele executa uma tarefa. Por exemplo, <code>git</code> é um aplicativo baseado em comando.</li>
<li>Interface do usuário (UI). Alguns aplicativos têm interfaces gráficas do usuário (GUIs) onde você clica em botões, insere texto, seleciona opções e muito mais.</li>
</ul>
<h3 id="console-e-aplicoes-de-ui-sao-limitadas">Console e Aplições de UI são limitadas</h3>
<p>Compare com um aplicativo baseado em comandos onde você digita um comando:</p>
<ul>
<li><strong>É limitado</strong>: Você não pode simplesmente digitar qualquer comando, apenas aqueles que o aplicativo suporta.</li>
<li><strong>Específico de idioma</strong>: Alguns aplicativos suportam vários idiomas, mas por padrão, o aplicativo é construído para um idioma específico, mesmo que você possa adicionar mais suporte a idiomas.</li>
</ul>
<h3 id="beneficios-de-aplicativos-de-geracao-de-texto">Benefícios de aplicativos de geração de texto</h3>
<p>Então, como uma aplicativo de geração de texto é diferente?</p>
<p>Em um aplicativo de geração de texto, você tem mais flexibilidade, não está limitado a um conjunto de comandos ou a um idioma específico de entrada. Em vez disso, você pode usar linguagem natural para interagir com o aplicativo. Outro benefício é que, como você já está interagindo com uma fonte de dados que foi treinada em um vasto corpus de informações, ao contrário de um aplicativo tradicional que pode ser limitado ao que está em um banco de dados.</p>
<h3 id="o-que-posso-criar-com-um-aplicativo-de-geracao-de-texto">O que posso criar com um aplicativo de geração de texto?</h3>
<p>Existem muitas coisas que você pode construir. Por exemplo:</p>
<ul>
<li><strong>Um chatbot</strong>: Um chatbot que responde a perguntas sobre tópicos, como sua empresa e seus produtos, pode ser uma boa opção.</li>
<li><strong>Assistente</strong>: Modelos de linguagem são ótimos para coisas como resumir texto, obter insights a partir de texto, produzir texto como currículos e mais.</li>
<li><strong>Assistente de código</strong>: Dependendo do modelo de linguagem que você usa, é possível construir um assistente de código que o ajuda a escrever código. Por exemplo, você pode usar um produto como o GitHub Copilot, bem como o ChatGPT, para ajudá-lo a escrever código.</li>
</ul>
<h2 id="como-posso-comecar">Como posso começar?</h2>
<p>Bem, você precisa encontrar uma maneira de integrar um modelo de linguagem grande (LLM), o que geralmente envolve as seguintes duas abordagens:</p>
<ul>
<li><strong>Usar uma API</strong>: Aqui, você está construindo solicitações web com seu prompt e obtendo texto gerado de volta.</li>
<li><strong>Usar uma biblioteca</strong>: As bibliotecas ajudam a encapsular as chamadas de API e facilitam o uso delas.</li>
</ul>
<h2 id="bibliotecassdks">Bibliotecas/SDKs</h2>
<p>Existem algumas bibliotecas bem conhecidas para trabalhar com Grandes Modelos de Linguagem (LLMs), como:</p>
<ul>
<li><strong>openai</strong>: Esta biblioteca facilita a conexão com seu modelo e o envio de prompts.</li>
</ul>
<p>Em seguida, existem bibliotecas que operam em um nível mais alto, como:</p>
<ul>
<li><strong>Langchain</strong>: Langchain é bem conhecida e oferece suporte ao Python.</li>
<li><strong>Semantic Kernel</strong>: Semantic Kernel é uma biblioteca da Microsoft que oferece suporte às linguagens C#, Python e Java.</li>
</ul>
<h2 id="primeiro-aplicativo-usando-openai">Primeiro aplicativo usando openai</h2>
<p>Vamos ver como podemos criar nosso primeiro aplicativo, quais bibliotecas precisamos, quanto é necessário e etc.</p>
<h3 id="instalando-o-openai">Instalando o openai</h3>
<p>Existem muitas bibliotecas por aí para interagir com o OpenAI ou o Azure OpenAI. É possível usar várias linguagens de programação, como C#, Python, JavaScript, Java e outras. Optamos por usar a biblioteca <code>openai</code> em Python, então vamos usar o <code>pip</code> para instalá-la.</p>
<pre><code class="language-bash">pip install openai
</code></pre>
<h3 id="criando-o-recurso">Criando o Recurso</h3>
<p>Você precisa realizar as seguintes etapas:</p>
<ul>
<li>Criar uma conta no Azure <a href="https://azure.microsoft.com/free/?WT.mc_id=academic-105485-koreyst">https://azure.microsoft.com/free/</a>.</li>
<li>Obter acesso ao Azure Open AI. Vá para <a href="https://learn.microsoft.com/azure/ai-services/openai/overview#how-do-i-get-access-to-azure-openai?WT.mc_id=academic-105485-koreyst">https://learn.microsoft.com/azure/ai-services/openai/overview#how-do-i-get-access-to-azure-openai</a> e solicite acesso.</li>
</ul>
<blockquote>
<p>[!OBSERVAÇÃO]
Até o presente momento, você precisa solicitar acesso ao Azure Open AI.</p>
</blockquote>
<ul>
<li>Instale Python <a href="https://www.python.org/">https://www.python.org/</a></li>
<li>Ter criado um recurso de serviço Azure OpenAI. Consulte este guia para saber como <a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/create-resource?pivots=web-portal?WT.mc_id=academic-105485-koreyst">criar um recurso</a>.</li>
</ul>
<h3 id="localize-a-chave-da-api-e-o-endpoint">Localize a chave da API e o endpoint</h3>
<p>Neste ponto, você precisa informar à biblioteca <code>openai</code> qual chave de API usar. Para encontrar sua chave de API, vá para a seção "Chaves e Endpoint" de seu recurso Azure Open AI e copie o valor de "Chave 1".</p>
<p><img alt="Keys and Endpoint resource blade in Azure Portal" src="https://learn.microsoft.com/azure/ai-services/openai/media/quickstarts/endpoint.png?WT.mc_id=academic-105485-koreyst" /></p>
<p>Agora que você tem essas informações copiadas, vamos instruir as bibliotecas a usá-las.</p>
<blockquote>
<p>[!OBSERVAÇÃO]
Vale a pena separar sua chave API do seu código. Você pode fazer isso usando variáveis de ambiente.</p>
<ul>
<li>Defina a variável de ambiente em: <code>OPENAI_API_TYPE</code> para a chave da sua API.
  <code>export OPENAI_API_KEY='sk-...'</code></li>
</ul>
</blockquote>
<h3 id="configurando-o-recurso-do-azure-no-codigo">Configurando o recurso do Azure no código</h3>
<p>If you're using Azure Open AI, here's how you setup configuration:</p>
<p>Se você estiver usando o Azure Open AI, veja como configurar:</p>
<pre><code class="language-python">openai.api_type = 'azure'
openai.api_key = os.environ[&quot;OPENAI_API_KEY&quot;]
openai.api_version = '2023-05-15'
openai.api_base = os.getenv(&quot;API_BASE&quot;)
</code></pre>
<p>Aqui estamos definindo o seguinte:</p>
<ul>
<li><code>api_type</code> para <code>azure</code>. Isso diz à biblioteca para usar o Azure Open AI e não o OpenAI.</li>
<li><code>api_key</code>, esta é a sua chave API encontrada no Portal do Azure.</li>
<li><code>api_version</code>, esta é a versão da API que você deseja usar. No momento da escrita, a versão mais recente é <code>2023-05-15</code>.</li>
<li><code>api_base</code>, este é o endpoint da API. Você pode encontrá-lo no Portal do Azure ao lado de sua chave API.</li>
</ul>
<blockquote>
<p>[!OBSERVAÇÃO] &gt; <code>os.getenv</code> é uma função que lê variáveis de ambiente. Você pode usá-lo para ler variáveis de ambiente como <code>OPENAI_API_KEY</code> e <code>API_BASE</code>. Defina essas variáveis de ambiente em seu terminal ou usando uma biblioteca como <code>dotenv</code>.</p>
</blockquote>
<h2 id="gerando-texto">Gerando texto</h2>
<p>Uma maneira de gerar texto é usar a classe <code>Completion</code>. Aqui está um exemplo:</p>
<pre><code class="language-python">prompt = &quot;Complete the following: Once upon a time there was a&quot;

completion = openai.Completion.create(model=&quot;davinci-002&quot;, prompt=prompt)
print(completion.choices[0].text)
</code></pre>
<p>No código acima, criamos um <code>completion object</code> e passamos o modelo que queremos usar e o prompt. Em seguida, imprimimos o texto gerado.</p>
<h3 id="chat-completions">Chat completions</h3>
<p>Até agora, você viu como usamos <code>Completion</code> para gerar texto. Mas há outra classe chamada <code>ChatCompletion</code> que é mais adequada para chatbots. Aqui está um exemplo de uso:</p>
<pre><code class="language-python">import openai

openai.api_key = &quot;sk-...&quot;

completion = openai.ChatCompletion.create(model=&quot;gpt-3.5-turbo&quot;, messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello world&quot;}])
print(completion.choices[0].message.content)
</code></pre>
<p>Aprenderemos mais sobre essa funcionalidade em um capítulo futuro.</p>
<h2 id="exercicio-seu-primeiro-aplicativo-de-geracao-de-texto">Exercício - seu primeiro aplicativo de geração de texto</h2>
<p>Agora que aprendemos a configurar o openai, é hora de criar o seu primeiro aplicativo de geração de texto. Para criar seu aplicativo, siga estas etapas:</p>
<ol>
<li>Crie um ambiente virtual e instale o openai:</li>
</ol>
<p><code>bash
   python -m venv venv
   source venv/bin/activate
   pip install openai</code></p>
<blockquote>
<p>[!OBSERVAÇÃO]
Se você estiver usando o Windows, digite <code>venv\Scripts\activate</code> em vez de <code>source venv/bin/activate</code>.</p>
<p>[!OBSERVAÇÃO]
Localize sua chave Azure Open AI acessando <a href="https://portal.azure.com/?WT.mc_id=academic-105485-koreyst">https://portal.azure.com/</a> e pesquise por <code>Open AI</code> e selecione o <code>recurso Open AI</code> e depois selecione <code>Chaves e Endpoint</code> e copie o valor <code>Chave 1</code>.</p>
</blockquote>
<ol>
<li>Crie um arquivo <em>app.py</em> e dê a ele o seguinte código:</li>
</ol>
<p>```python
   import openai</p>
<p>openai.api_key = "<replace this value with your open ai key or Azure Open AI key>"</p>
<p>openai.api_type = 'azure'
   openai.api_version = '2023-05-15'
   openai.api_base = "<endpoint found in Azure Portal where your API key is>"
   deployment_name = "<deployment name>"</p>
<p># add your completion code
   prompt = "Complete the following: Once upon a time there was a"</p>
<p># make completion
   completion = openai.Completion.create(engine= deployment_name, model="davinci-002", prompt=prompt)</p>
<p># print response
   print(completion.choices[0].text)
   ```</p>
<blockquote>
<p>[!OBSERVAÇÃO]
Se você estiver usando o Azure Open AI, precisará definir o <code>api_type</code> como <code>azure</code> e definir o <code>api_key</code> como sua chave Azure Open AI.</p>
</blockquote>
<p>Você deve ver uma saída como a seguinte:</p>
<p>```output
    very unhappy _____.</p>
<p>Once upon a time there was a very unhappy mermaid.
   ```</p>
<h2 id="diferentes-tipos-de-prompts-para-diferentes-coisas">Diferentes tipos de prompts, para diferentes coisas</h2>
<p>Agora que você viu como gerar texto usando um prompt, você até tem um programa em execução que pode modificar e alterar para gerar diferentes tipos de texto.</p>
<p>Prompts podem ser usados para todas as formas de tarefas. Por exemplo:</p>
<ul>
<li><strong>Gerar um tipo de texto</strong>: Por exemplo, você pode gerar um poema, perguntas para um quiz, etc.</li>
<li><strong>Procurar informações</strong>: Você pode usar prompts para procurar informações, como no exemplo a seguir: 'O que significa CORS no desenvolvimento web?'.</li>
<li><strong>Gerar código</strong>: Você pode usar prompts para gerar código, por exemplo, desenvolvendo uma expressão regular usada para validar e-mails ou até mesmo gerar um programa inteiro, como um aplicativo web?</li>
</ul>
<h2 id="um-caso-de-uso-mais-pratico-um-gerador-de-receitas">Um caso de uso mais prático: um gerador de receitas</h2>
<p>Imagine que você tenha ingredientes em casa e quer cozinhar algo. Para isso, você precisa de uma receita. Uma maneira de encontrar receitas é usar um mecanismo de busca ou você poderia usar um LLM para fazer isso.</p>
<p>Você poderia escrever um prompt assim:</p>
<blockquote>
<p>"Me forneça 5 receitas para um prato com os seguintes ingredientes: frango, batatas e cenouras. Por receita, liste todos os ingredientes utilizados"</p>
</blockquote>
<p>Dado o prompt acima, você pode obter uma resposta semelhante a:</p>
<pre><code class="language-output">1. Frango Assado com Vegetais:
   - Ingredientes:
     - 4 coxas de frango
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 2 colheres de sopa de azeite de oliva
     - 2 dentes de alho, picados
     - 1 colher de chá de tomilho seco
     - 1 colher de chá de orégano seco
     - Sal e pimenta a gosto

2. Ensopado de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 1 cebola, picada
     - 2 dentes de alho, picados
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 colher de chá de orégano seco
     - 1 colher de chá de tomilho seco
     - 1 xícara de caldo de galinha
     - Sal e pimenta a gosto

3. Assado de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 cebola, picada
     - 2 dentes de alho, picados
     - 1 colher de chá de orégano seco
     - 1 colher de chá de tomilho seco
     - 1 xícara de caldo de galinha
     - Sal e pimenta a gosto

4. Sopa de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 1 cebola, picada
     - 2 dentes de alho, picados
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 colher de chá de orégano seco
     - 1 colher de chá de tomilho seco
     - 4 xícaras de caldo de galinha
     - Sal e pimenta a gosto

5. Hash de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 cebola, picada
     - 2 dentes de alho, picados
     - 1 colher de chá de orégano

</code></pre>
<p>Essa saída é ótima, eu sei o quê cozinhar. Neste ponto, o que poderia ser útil são melhorias:</p>
<ul>
<li>Filtre os ingredientes que não gosto ou sou alérgico.</li>
<li>Me forneça uma lista de compras, caso eu não tenha todos os ingredientes em casa.</li>
</ul>
<p>Para os casos acima, vamos adicionar um prompt adicional:</p>
<blockquote>
<p>"Por favor, remova receitas com alho, pois sou alérgico e substitua por outra coisa. Além disso, por favor, me forneça uma lista de compras para as receitas, considerando que já tenho frango, batatas e cenouras em casa."</p>
</blockquote>
<p>Agora você tem um novo resultado, a saber:</p>
<pre><code class="language-output">1. Frango Assado com Vegetais:
   - Ingredientes:
     - 4 coxas de frango
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 2 colheres de sopa de azeite de oliva
     - 1 colher de chá de tomilho seco
     - 1 colher de chá de orégano seco
     - Sal e pimenta a gosto

2. Ensopado de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 1 cebola, picada
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 colher de chá de orégano seco
     - 1 colher de chá de tomilho seco
     - 1 xícara de caldo de galinha
     - Sal e pimenta a gosto

3. Frango e Batata Assados:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 cebola, picada
     - 1 colher de chá de orégano seco
     - 1 colher de chá de tomilho seco
     - 1 xícara de caldo de galinha
     - Sal e pimenta a gosto

4. Sopa de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 1 cebola, picada
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 colher de chá de orégano seco
     - 1 colher de chá de tomilho seco
     - 4 xícaras de caldo de galinha
     - Sal e pimenta a gosto

5. Hash de Frango e Batata:
   - Ingredientes:
     - 2 colheres de sopa de azeite de oliva
     - 2 peitos de frango, cortados em cubos
     - 2 batatas, cortadas em cubos
     - 2 cenouras, cortadas em cubos
     - 1 cebola, picada
     - 1 colher de chá de orégano

Lista de Compras:
- Azeite de oliva
- Cebola
- Tomilho
- Orégano
- Sal
- Pimenta
</code></pre>
<p>Aqui estão as cinco receitas, sem mencionar alho, e também uma lista de compras considerando o que você já tem em casa.</p>
<h2 id="execircio-crie-um-gerador-de-receitas">Execírcio - crie um gerador de receitas</h2>
<p>Agora que temos um cenário, vamos escrever o código para corresponder ao cenário demonstrado. Para fazer isso, siga estas etapas:</p>
<ol>
<li>Use o arquivo <em>app.py</em> existente como ponto de partida</li>
<li>Localize a variável <code>prompt</code> e altere seu código para o seguinte:</li>
</ol>
<p><code>python
   prompt = "Me forneça 5 receitas de um prato com os seguintes ingredientes: frango, batata e cenoura. Por receita, liste todos os ingredientes usados"</code></p>
<p>Se você executar o código agora, deverá ver uma saída semelhante a:</p>
<p>```output
   - Ensopado de Frango com Batata e Cenoura: 3 colheres de sopa de azeite, 1 cebola picada, 2 dentes de alho picados, 1 cenoura descascada e picada, 1 batata descascada e picada, 1 folha de louro, 1 raminho de tomilho, 1/2 colher de chá de sal , 1/4 colher de chá de pimenta preta, 1 1/2 xícara de caldo de galinha, 1/2 xícara de vinho branco seco, 2 colheres de sopa de salsa fresca picada, 2 colheres de sopa de manteiga sem sal, 1 1/2 libra de coxas de frango desossadas e sem pele, cortadas em 1- pedaços de polegada</p>
<ul>
<li>
<p>Frango Assado no Forno com Batata e Cenoura: 3 colheres de sopa de azeite extra-virgem, 1 colher de sopa de mostarda Dijon, 1 colher de sopa de alecrim fresco picado, 1 colher de sopa de tomilho fresco picado, 4 dentes de alho picados, 1 1/2 libra de batatas vermelhas pequenas, esquartejado, 1 1/2 libra de cenoura, cortada em quartos longitudinalmente, 1/2 colher de chá de sal, 1/4 colher de chá de pimenta preta, 1 (4 libras) de frango inteiro</p>
</li>
<li>
<p>Caçarola de frango, batata e cenoura: spray de cozinha, 1 cebola grande picada, 2 dentes de alho picados, 1 cenoura descascada e ralada, 1 batata descascada e ralada, 1/2 colher de chá de folhas secas de tomilho, 1/4 colher de chá sal, 1/4 colher de chá de pimenta preta, 2 xícaras de caldo de galinha desnatado e com baixo teor de sódio, 1 xícara de ervilhas congeladas, 1/4 xícara de farinha de trigo, 1 xícara de leite com baixo teor de gordura a 2%, 1/4 xícara de parmesão ralado queijo</p>
</li>
<li>
<p>Jantar de frango e batata em uma panela: 2 colheres de sopa de azeite, 1 quilo de coxas de frango desossadas e sem pele, cortadas em pedaços de 2,5 cm, 1 cebola grande picada, 3 dentes de alho picados, 1 cenoura descascada e picada, 1 batata, descascado e picado, 1 folha de louro, 1 raminho de tomilho, 1/2 colher de chá de sal, 1/4 colher de chá de pimenta preta, 2 xícaras de caldo de galinha, 1/2 xícara de vinho branco seco</p>
</li>
<li>
<p>Caril de Frango, Batata e Cenoura: 1 colher de sopa de óleo vegetal, 1 cebola grande picada, 2 dentes de alho picados, 1 cenoura descascada e picada, 1 batata descascada e picada, 1 colher de chá de coentro moído, 1 colher de chá de cominho moído, 1/2 colher de chá de açafrão em pó, 1/2 colher de chá de gengibre em pó, 1/4 colher de chá de pimenta caiena, 2 xícaras de caldo de galinha, 1/2 xícara de vinho branco seco, 1 lata (15 onças) de grão de bico, escorrido e enxaguado, 1/2 xícara de passas, 1/2 xícara de coentro fresco picado
   ```</p>
</li>
</ul>
<blockquote>
<p>[!OBSERVAÇÃO]
seu LLM é não determinístico, então você pode obter resultados diferentes sempre que executar o programa.</p>
</blockquote>
<p>Ótimo! Vamos ver como podemos melhorar as coisas. Para melhorar as coisas, queremos ter certeza de que o código é flexível, para que os ingredientes e o número de receitas possam ser melhorados e alterados.</p>
<ol>
<li>Vamos alterar o código da seguinte maneira:</li>
</ol>
<p>```python
   no_recipes = input("No of recipes (for example, 5: ")</p>
<p>ingredients = input("List of ingredients (for example, chicken, potatoes, and carrots: ")</p>
<p># interpolate the number of recipes into the prompt an ingredients
   prompt = f"Show me {no_recipes} recipes for a dish with the following ingredients: {ingredients}. Per recipe, list all the ingredients used"
   ```</p>
<p>Execute o código e teste, e vejamos o resultado:</p>
<p>```output
   No of recipes (for example, 5: 3
   List of ingredients (for example, chicken, potatoes, and carrots: milk,strawberries</p>
<p>-Strawberry milk shake: milk, strawberries, sugar, vanilla extract, ice cubes
   -Strawberry shortcake: milk, flour, baking powder, sugar, salt, unsalted butter, strawberries, whipped cream
   -Strawberry milk: milk, strawberries, sugar, vanilla extract
   ```</p>
<h3 id="melhore-adicionando-filtro-e-lista-de-compras">Melhore adicionando filtro e lista de compras</h3>
<p>Agora nós temos um aplicativo funcionando capaz de produzir receitas e é flexível, pois depende de entradas do usuário, tanto no número de receitas quanto nos ingredientes usados.</p>
<p>Para melhorar ainda mais, queremos adicionar o seguinte:</p>
<ul>
<li><strong>Filtrar ingredientes</strong>: Queremos ser capazes de filtrar ingredientes que não gostamos ou somos alérgicos. Para realizar essa alteração, podemos editar nosso prompt existente e adicionar uma condição de filtro ao final, assim:</li>
</ul>
<p>```python
  filter = input("Filter (for example, vegetarian, vegan, or gluten-free: ")</p>
<p>prompt = f"Show me {no_recipes} recipes for a dish with the following ingredients: {ingredients}. Per recipe, list all the ingredients used, no {filter}"
  ```</p>
<p>Acima adicionamos <code>{filter}</code> ao final do prompt e também capturamos o valor do filtro do usuário.</p>
<p>Um exemplo de entrada da execução do programa pode ser assim:</p>
<p>```output
  No of recipes (for example, 5: 3
  List of ingredients (for example, chicken, potatoes, and carrots: onion,milk
  Filter (for example, vegetarian, vegan, or gluten-free: no milk</p>
<ol>
<li>French Onion Soup</li>
</ol>
<p>Ingredients:</p>
<p>-1 large onion, sliced
  -3 cups beef broth
  -1 cup milk
  -6 slices french bread
  -1/4 cup shredded Parmesan cheese
  -1 tablespoon butter
  -1 teaspoon dried thyme
  -1/4 teaspoon salt
  -1/4 teaspoon black pepper</p>
<p>Instructions:</p>
<ol>
<li>In a large pot, sauté onions in butter until golden brown.</li>
<li>Add beef broth, milk, thyme, salt, and pepper. Bring to a boil.</li>
<li>Reduce heat and simmer for 10 minutes.</li>
<li>Place french bread slices on soup bowls.</li>
<li>Ladle soup over bread.</li>
<li>
<p>Sprinkle with Parmesan cheese.</p>
</li>
<li>
<p>Onion and Potato Soup</p>
</li>
</ol>
<p>Ingredients:</p>
<p>-1 large onion, chopped
  -2 cups potatoes, diced
  -3 cups vegetable broth
  -1 cup milk
  -1/4 teaspoon black pepper</p>
<p>Instructions:</p>
<ol>
<li>In a large pot, sauté onions in butter until golden brown.</li>
<li>Add potatoes, vegetable broth, milk, and pepper. Bring to a boil.</li>
<li>Reduce heat and simmer for 10 minutes.</li>
<li>
<p>Serve hot.</p>
</li>
<li>
<p>Creamy Onion Soup</p>
</li>
</ol>
<p>Ingredients:</p>
<p>-1 large onion, chopped
  -3 cups vegetable broth
  -1 cup milk
  -1/4 teaspoon black pepper
  -1/4 cup all-purpose flour
  -1/2 cup shredded Parmesan cheese</p>
<p>Instructions:</p>
<ol>
<li>In a large pot, sauté onions in butter until golden brown.</li>
<li>Add vegetable broth, milk, and pepper. Bring to a boil.</li>
<li>Reduce heat and simmer for 10 minutes.</li>
<li>In a small bowl, whisk together flour and Parmesan cheese until smooth.</li>
<li>Add to soup and simmer for an additional 5 minutes, or until soup has thickened.
  ```</li>
</ol>
<p>Como você pode ver, todas as receitas com leite foram filtradas. Mas, se você for intolerante à lactose, talvez queira filtrar também as receitas com queijo, então é preciso ser claro.</p>
<ul>
<li><strong>Produze uma lista de compras</strong>. Queremos produzir uma lista de compras, considerando o que já temos em casa.</li>
</ul>
<p>Para esta funcionalidade, poderíamos tentar resolver tudo em um prompt ou poderíamos dividi-lo em dois prompts. Vamos tentar a última abordagem. Aqui estamos sugerindo adicionar um prompt adicional, mas para que isso funcione, precisamos adicionar o resultado do prompt anterior como contexto para o prompt posterior.</p>
<p>```python
  old_prompt_result = completion.choices[0].text
  prompt = "Produce a shopping list for the generated recipes and please don't include ingredients that I already have."</p>
<p>new_prompt = f"{old_prompt_result} {prompt}"
  completion = openai.Completion.create(engine=deployment_name, prompt=new_prompt, max_tokens=1200)</p>
<p># print response
  print("Shopping list:")
  print(completion.choices[0].text)
  ```</p>
<p>Observe o seguinte:</p>
<ol>
<li>
<p>Nós estamos criando um novo prompt adicionando o resultado do primeiro prompt ao novo prompt:</p>
<p><code>python
 new_prompt = f"{old_prompt_result} {prompt}"</code></p>
</li>
<li>
<p>Nós fizemos uma nova requisição, mas também considerando o número de tokens que solicitamos no primeiro prompt, então desta vez dizemos que <code>max_tokens</code> é 1200.</p>
<p><code>python
 completion = openai.Completion.create(engine=deployment_name, prompt=new_prompt, max_tokens=1200)</code></p>
<p>Dando uma olhada neste código, chegamos agora à seguinte saída:</p>
<p>```output
 No of recipes (for example, 5: 2
 List of ingredients (for example, chicken, potatoes, and carrots: apple,flour
 Filter (for example, vegetarian, vegan, or gluten-free: sugar</p>
<ul>
<li>
<p>Apple and flour pancakes: 1 cup flour, 1/2 tsp baking powder, 1/2 tsp baking soda, 1/4 tsp salt, 1 tbsp sugar, 1 egg, 1 cup buttermilk or sour milk, 1/4 cup melted butter, 1 Granny Smith apple, peeled and grated</p>
</li>
<li>
<p>Apple fritters: 1-1/2 cups flour, 1 tsp baking powder, 1/4 tsp salt, 1/4 tsp baking soda, 1/4 tsp nutmeg, 1/4 tsp cinnamon, 1/4 tsp allspice, 1/4 cup sugar, 1/4 cup vegetable shortening, 1/4 cup milk, 1 egg, 2 cups shredded, peeled apples</p>
</li>
</ul>
<p>Shopping list:
 - Flour, baking powder, baking soda, salt, sugar, egg, buttermilk, butter, apple, nutmeg, cinnamon, allspice
 ```</p>
</li>
</ol>
<h2 id="melhorando-a-nossa-configuracao">Melhorando a nossa configuração</h2>
<p>O que temos até agora é um código que funciona, mas há algumas alterações que devemos fazer para melhorar ainda mais as coisas. Algumas coisas que devemos fazer são:</p>
<ul>
<li>
<p><strong>Separar <code>secrets</code> do código</strong>, como a chave da API. Segredos não pertencem ao código e devem ser armazenados em um local seguro. Para separar segredos do código, podemos usar variáveis de ambiente e bibliotecas como <code>python-dotenv</code> para carregá-los de um arquivo. Veja como isso ficaria no código:</p>
</li>
<li>
<p>Crie um arquivo <code>.env</code> com o seguinte conteúdo:</p>
<p><code>bash
 OPENAI_API_KEY=sk-...</code></p>
<blockquote>
<p>Observação: para o Azure, você precisa definir as seguintes variáveis de ambiente:</p>
</blockquote>
<p><code>bash
 OPENAI_API_TYPE=azure
 OPENAI_API_VERSION=2023-05-15
 OPENAI_API_BASE=&lt;replace&gt;</code></p>
<p>No código, você carregaria as variáveis de ambiente assim:</p>
<p>```python
 from dotenv import load_dotenv</p>
<p>load_dotenv()</p>
<p>openai.api_key = os.environ["OPENAI_API_KEY"]
 ```</p>
</li>
<li>
<p><strong>Uma palavra sobre o comprimento do token</strong>. Devemos considerar quantos tokens precisamos para gerar o texto que queremos. Tokens custam dinheiro, então, sempre que possível, devemos tentar ser econômicos com o número de tokens que usamos. Por exemplo, podemos formular o prompt para que possamos usar menos tokens?</p>
</li>
</ul>
<p>Para alterar os tokens usados, você pode usar o parâmetro <code>max_tokens</code>. Por exemplo, se você quiser usar 100 tokens, você faria:</p>
<p><code>python
  completion = openai.Completion.create(model="davinci-002", prompt=prompt, max_tokens=100)</code></p>
<ul>
<li><strong>Experimentando com a temperatura</strong>. A temperatura é algo que não mencionamos até agora. Porém, é um contexto importante para o desempenho de nosso programa. Quanto maior o valor da temperatura, mais aleatório será o resultado. Por outro lado, quanto menor o valor da temperatura, mais previsível será o resultado. Considere se você deseja ou não variação na saída.</li>
</ul>
<p>Para alterar a temperatura, você pode usar o parâmetro <code>temperature</code>. Por exemplo, se você quiser usar uma temperatura de 0.5, você faria:</p>
<p><code>python
  completion = openai.Completion.create(model="davinci-002", prompt=prompt, temperature=0.5)</code></p>
<blockquote>
<p>Observação: quanto mais próximo de 1.0, mais variada será a saída.</p>
</blockquote>
<h2 id="tarefa">Tarefa</h2>
<p>Para esta tarefa, você pode escolher o que criar para um aplicativo.</p>
<p>Aqui estão algumas sugestões:</p>
<ul>
<li>Ajuste o aplicativo gerador de receitas para melhorá-lo ainda mais. Brinque com os valores de temperatura e os prompts para ver o que você pode criar.</li>
<li>
<p>Crie um "companheiro de estudos". Este aplicativo deve ser capaz de responder a perguntas sobre um tópico. Por exemplo: Python. Você poderia ter prompts como: "O que é um certo tópico em Python?" ou poderia ter um prompt que diz: "Me mostre o código para um certo tópico", etc.</p>
</li>
<li>
<p>Bot de história, faça a história ganhar vida, instrua o bot a interpretar um certo personagem histórico e faça perguntas sobre sua vida e época.</p>
</li>
</ul>
<h2 id="solucao">Solução</h2>
<h3 id="amigo-de-estudo">Amigo de Estudo</h3>
<p>Abaixo está um prompt inicial, veja como você pode usá-lo e ajustá-lo ao seu gosto.</p>
<pre><code class="language-text">- &quot;You're an expert on the Python language

    Suggest a beginner lesson for Python in the following format:

    Format:
    - concepts:
    - brief explanation of the lesson:
    - exercise in code with solutions&quot;
</code></pre>
<h3 id="bot-de-historia">Bot de História</h3>
<p>Aqui estão alguns prompts que você pode usar:</p>
<pre><code class="language-text">- &quot;You are Abe Lincoln, tell me about yourself in 3 sentences, and respond using grammar and words like Abe would have used&quot;
- &quot;You are Abe Lincoln, respond using grammar and words like Abe would have used:

   Tell me about your greatest accomplishments, in 300 words&quot;
</code></pre>
<h2 id="verificacao-de-conhecimento">Verificação de Conhecimento</h2>
<p>What does the concept temperature do?</p>
<p>O que o conceito de temperatura faz?</p>
<ol>
<li>Ele controla o quão aleatória é a saída.</li>
<li>Ele controla o quão grande é a resposta.</li>
<li>Ele controla quantos tokens são usados.</li>
</ol>
<p>Resposta: 1. Ele controla o quão aleatória é a saída.</p>
<h2 id="desafio">🚀 Desafio</h2>
<p>When working on the assignment, try to vary the temperature, try set it to 0, 0.5, and 1. Remember that 0 is the least varied and 1 is the most, what value works best for your app?</p>
<p>Quando estiver trabalhando na tarefa, tente variar a temperatura, tente definir para 0, 0.5 e 1. Lembre-se de que 0 é o menos variado e 1 é o mais, qual valor funciona melhor para o seu aplicativo?</p>
<h2 id="excelente-trabalho-continue-seu-aprendizado">Excelente trabalho! Continue seu aprendizado</h2>
<p>Após concluir esta lição, confira nossa <a href="https://aka.ms/genai-collection?WT.mc_id=academic-105485-koreyst">coleção de aprendizado de IA generativa</a> para continuar a aprimorar seus conhecimentos sobre IA generativa!</p>
<p>Vamos prosseguir para a Lição 7, onde veremos como <a href="../../../07-building-chat-applications/translations/pt-br/?WT.mc_id=academic-105485-koreyst">criar aplicativos de chat</a>!</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
